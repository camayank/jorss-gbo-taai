# =============================================================================
# BRANDING CONFIGURATION
# =============================================================================
# All branding is configurable via environment variables.
# Copy this file to .env and customize for your CPA firm.
#
# Alternatively, use a JSON config file:
#   python -m src.config.branding generic_cpa ./branding_config.json
#   export BRANDING_CONFIG_PATH=./branding_config.json
#
# See docs/BRANDING_CONFIGURATION.md for detailed documentation.
# =============================================================================

# Platform Identity
PLATFORM_NAME="Tax Filing Platform"
COMPANY_NAME="Your CPA Firm"
PLATFORM_TAGLINE="Professional Tax Filing Made Simple"

# Visual Branding (hex colors)
BRAND_PRIMARY_COLOR="#667eea"
BRAND_SECONDARY_COLOR="#764ba2"
BRAND_LOGO_URL="/static/logo.svg"
BRAND_FAVICON_URL="/static/favicon.ico"

# Contact Information
SUPPORT_EMAIL="support@example.com"
SUPPORT_PHONE="1-800-TAX-HELP"
COMPANY_WEBSITE="https://example.com"
COMPANY_ADDRESS="123 Main Street, City, ST 12345"

# Feature Claims & Messaging
FILING_TIME_CLAIM="3 Minutes"
SECURITY_CLAIM="Bank-level encryption"
REVIEW_CLAIM="CPA Reviewed"

# Legal Links
TERMS_URL="/legal/terms"
PRIVACY_URL="/legal/privacy"

# SEO & Meta
META_DESCRIPTION="File your taxes quickly and securely with professional CPA review"
META_KEYWORDS="tax filing, CPA, tax preparation, tax return"

# Advanced Customization (optional)
# CUSTOM_CSS_PATH="/static/custom.css"
# CUSTOM_JS_PATH="/static/custom.js"

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable unified filing system (new architecture)
UNIFIED_FILING=true

# Enable database persistence (recommended)
DB_PERSISTENCE=true

# Enable new landing page (vs old index.html)
NEW_LANDING=true

# Enable old workflows for backward compatibility
OLD_WORKFLOWS=false

# Enable scenario explorer integration
SCENARIOS_ENABLED=true

# AI Integration Feature Flags (all default to true)
# Set to "false" to disable individual AI integrations
AI_CHAT_ENABLED=true
AI_REPORT_NARRATIVES_ENABLED=true
AI_SAFETY_CHECKS_ENABLED=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Preferred production connection string (PostgreSQL)
# Example: postgresql://user:password@host:5432/database
DATABASE_URL=

# Database path (SQLite)
DATABASE_PATH="./data/tax_returns.db"

# Database pool size
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# Session storage backend: "redis" (recommended) or "sqlite" (default)
# Redis is required for multi-worker deployments to share sessions
SESSION_STORAGE_TYPE=redis

# Redis connection URL (required when SESSION_STORAGE_TYPE=redis)
REDIS_URL=redis://localhost:6379/0

# Session expiry (hours) — database TTL
SESSION_EXPIRY_HOURS=24

# In-memory session timeout (minutes) — idle sessions evicted after this
SESSION_TIMEOUT_MINUTES=30

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# IMPORTANT: All secrets below MUST be set in production!
# Generate secrets with: python -c "import secrets; print(secrets.token_hex(32))"

# JWT secret key (REQUIRED in production - min 32 chars)
# Generate: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET=

# Application secret key (REQUIRED in production - min 32 chars)
APP_SECRET_KEY=

# CSRF protection secret (REQUIRED in production - min 32 chars)
CSRF_SECRET_KEY=

# Auth service secret (REQUIRED in production - min 32 chars)
AUTH_SECRET_KEY=

# Password hashing salt (REQUIRED in production - min 16 chars)
PASSWORD_SALT=

# PII encryption key (REQUIRED in production - min 32 chars)
# WARNING: Losing this key = losing access to encrypted data!
ENCRYPTION_MASTER_KEY=

# SSN hashing secret (REQUIRED in production - min 32 chars)
SSN_HASH_SECRET=

# JWT algorithm
JWT_ALGORITHM="HS256"

# Access token expiry (seconds)
ACCESS_TOKEN_EXPIRE_SECONDS=28800  # 8 hours

# Refresh token expiry (days)
REFRESH_TOKEN_EXPIRE_DAYS=30

# CORS allowed origins (comma-separated)
CORS_ORIGINS="http://localhost:3000,http://localhost:8000"

# =============================================================================
# OCR & AI CONFIGURATION
# =============================================================================

# OpenAI API key (for intelligent features)
OPENAI_API_KEY=

# OCR provider (tesseract, google, aws)
OCR_PROVIDER="tesseract"

# OCR confidence threshold (0-100)
OCR_CONFIDENCE_THRESHOLD=70

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# Email provider (smtp, sendgrid, ses)
# EMAIL_PROVIDER="smtp"

# SMTP settings (if using SMTP)
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT=587
# SMTP_USERNAME="your-email@gmail.com"
# SMTP_PASSWORD="your-password"
# SMTP_FROM_EMAIL="noreply@example.com"
# SMTP_FROM_NAME="Tax Filing Platform"

# =============================================================================
# DATA RETENTION (GDPR / Compliance)
# =============================================================================

# How long to keep sessions before automatic purge (hours)
SESSION_RETENTION_HOURS=72

# How long to keep orphaned uploads before deletion (days)
ORPHAN_UPLOAD_RETENTION_DAYS=30

# How long to keep audit logs (days) — regulatory minimum ~7 years
AUDIT_LOG_RETENTION_DAYS=2555

# How long to keep completed tax return data (days)
TAX_DATA_RETENTION_DAYS=2555

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL="INFO"

# Enable performance monitoring
ENABLE_MONITORING=true

# Sentry DSN (for error tracking)
# SENTRY_DSN="https://..."

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Server host and port
HOST="0.0.0.0"
PORT=8000

# Environment (development, staging, production)
# IMPORTANT: Defaults to "production" if not set. Set to "development" for local dev.
APP_ENVIRONMENT="development"
ENVIRONMENT="development"

# Debug mode (disable in production)
DEBUG=true

# Workers (for production deployment)
WORKERS=4

# Max upload size (MB)
MAX_UPLOAD_SIZE_MB=10

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES="pdf,png,jpg,jpeg,gif,tif,tiff"

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Stripe (Connect — only needed if enabling Stripe payouts to CPAs)
# Payments are collected via Mercury wallet by default.
# STRIPE_PUBLIC_KEY="pk_test_..."
# STRIPE_SECRET_KEY="sk_test_..."
# STRIPE_WEBHOOK_SECRET="whsec_..."
# STRIPE_CLIENT_ID="ca_..."
# STRIPE_PUBLISHABLE_KEY="pk_test_..."

# Application URL (used for OAuth callbacks, email links, etc.)
# APP_URL="https://yourdomain.com"
# BASE_URL="https://yourdomain.com"

# =============================================================================
# FUNNEL ORCHESTRATION (Lead conversion settings)
# =============================================================================

# Platform fee for lead conversions (percentage of engagement value)
# Standard leads pay 15%, high-value (>$5000) pay 12%
LEAD_REVENUE_SHARE_PERCENT=15.0
HIGH_VALUE_REVENUE_SHARE_PERCENT=12.0

# Auto-assignment settings
AUTO_ASSIGNMENT_ENABLED=true
# Options: round_robin, complexity_match, capacity
ASSIGNMENT_ALGORITHM=round_robin
MAX_LEADS_PER_CPA_PER_DAY=10

# Email delivery settings
SEND_REPORT_TO_LEAD=true
SEND_REPORT_TO_CPA=true
SEND_HOT_LEAD_ALERTS=true

# Nurture sequence settings
AUTO_ENROLL_NURTURE=true

# Google Analytics
# GOOGLE_ANALYTICS_ID="G-..."

# Intercom (customer support)
# INTERCOM_APP_ID="..."

# =============================================================================
# TENANT CONFIGURATION (Multi-tenant deployments)
# =============================================================================

# Use domain-based branding (advanced)
# MULTI_TENANT_ENABLED=false

# Default tenant ID
# DEFAULT_TENANT="default"

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example 1: Generic CPA Firm
# PLATFORM_NAME="TaxPro Online"
# COMPANY_NAME="Smith & Associates CPAs"
# BRAND_PRIMARY_COLOR="#059669"
# SUPPORT_EMAIL="support@taxpro.com"

# Example 2: Boutique Firm
# PLATFORM_NAME="Elite Tax Services"
# COMPANY_NAME="Elite Tax Advisors"
# BRAND_PRIMARY_COLOR="#991b1b"
# FILING_TIME_CLAIM="10 Minutes"
# REVIEW_CLAIM="Partner-level Review"

# Example 3: Enterprise
# PLATFORM_NAME="Enterprise Tax Platform"
# COMPANY_NAME="Global Tax Solutions LLC"
# BRAND_PRIMARY_COLOR="#1e40af"
# SECURITY_CLAIM="Enterprise-grade security"
