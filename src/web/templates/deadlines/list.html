{% extends "base_modern.html" %}

{% block title %}Tax Deadlines - {{ config.APP_NAME }}{% endblock %}

{% block extra_css %}
<style>
    .deadlines-page {
        padding: var(--space-6);
        max-width: 1200px;
        margin: 0 auto;
    }

    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-6);
    }

    .page-title {
        font-size: var(--text-2xl);
        font-weight: var(--font-semibold);
        color: var(--color-gray-900);
    }

    .header-actions {
        display: flex;
        gap: var(--space-3);
    }

    .btn {
        display: inline-flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2) var(--space-4);
        border-radius: var(--radius-md);
        font-size: var(--text-sm);
        font-weight: var(--font-medium);
        cursor: pointer;
        transition: all 0.2s;
        border: none;
    }

    .btn-primary {
        background: var(--color-primary-600);
        color: white;
    }

    .btn-primary:hover {
        background: var(--color-primary-700);
    }

    .btn-secondary {
        background: white;
        color: var(--color-gray-700);
        border: 1px solid var(--color-gray-300);
    }

    .btn-secondary:hover {
        background: var(--color-gray-50);
    }

    /* Stats Row */
    .stats-row {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-4);
        margin-bottom: var(--space-6);
    }

    .stat-card {
        background: white;
        border-radius: var(--radius-lg);
        border: 1px solid var(--color-gray-200);
        padding: var(--space-4);
    }

    .stat-card.urgent {
        border-left: 4px solid var(--color-error-500);
    }

    .stat-card.warning {
        border-left: 4px solid var(--color-warning-500);
    }

    .stat-card.upcoming {
        border-left: 4px solid var(--color-primary-500);
    }

    .stat-card.completed {
        border-left: 4px solid var(--color-success-500);
    }

    .stat-value {
        font-size: var(--text-2xl);
        font-weight: var(--font-bold);
        color: var(--color-gray-900);
    }

    .stat-label {
        font-size: var(--text-sm);
        color: var(--color-gray-500);
        margin-top: var(--space-1);
    }

    /* Filters */
    .filters-bar {
        display: flex;
        gap: var(--space-4);
        margin-bottom: var(--space-6);
        flex-wrap: wrap;
    }

    .search-input {
        flex: 1;
        min-width: 200px;
        padding: var(--space-2) var(--space-3);
        padding-left: var(--space-10);
        border: 1px solid var(--color-gray-300);
        border-radius: var(--radius-md);
        font-size: var(--text-sm);
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%239ca3af' stroke-width='2' viewBox='0 0 24 24'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='M21 21l-4.35-4.35'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: var(--space-3) center;
    }

    .search-input:focus {
        outline: none;
        border-color: var(--color-primary-500);
        box-shadow: 0 0 0 3px var(--color-primary-100);
    }

    .filter-select {
        padding: var(--space-2) var(--space-3);
        border: 1px solid var(--color-gray-300);
        border-radius: var(--radius-md);
        font-size: var(--text-sm);
        background: white;
        min-width: 150px;
    }

    .filter-select:focus {
        outline: none;
        border-color: var(--color-primary-500);
    }

    /* Deadlines List */
    .deadlines-card {
        background: white;
        border-radius: var(--radius-lg);
        border: 1px solid var(--color-gray-200);
        overflow: hidden;
    }

    .deadlines-section {
        border-bottom: 1px solid var(--color-gray-200);
    }

    .deadlines-section:last-child {
        border-bottom: none;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--space-4) var(--space-6);
        background: var(--color-gray-50);
        cursor: pointer;
    }

    .section-title {
        font-size: var(--text-sm);
        font-weight: var(--font-semibold);
        color: var(--color-gray-900);
        display: flex;
        align-items: center;
        gap: var(--space-2);
    }

    .section-badge {
        padding: var(--space-0-5) var(--space-2);
        border-radius: var(--radius-full);
        font-size: var(--text-xs);
        font-weight: var(--font-medium);
    }

    .section-badge.urgent {
        background: var(--color-error-100);
        color: var(--color-error-700);
    }

    .section-badge.warning {
        background: var(--color-warning-100);
        color: var(--color-warning-700);
    }

    .section-badge.info {
        background: var(--color-primary-100);
        color: var(--color-primary-700);
    }

    .section-toggle {
        transition: transform 0.2s;
    }

    .section-toggle.collapsed {
        transform: rotate(-90deg);
    }

    .deadline-list {
        display: flex;
        flex-direction: column;
    }

    .deadline-item {
        display: grid;
        grid-template-columns: 80px 1fr 150px 150px 120px;
        gap: var(--space-4);
        align-items: center;
        padding: var(--space-4) var(--space-6);
        border-bottom: 1px solid var(--color-gray-100);
        transition: background 0.2s;
    }

    .deadline-item:last-child {
        border-bottom: none;
    }

    .deadline-item:hover {
        background: var(--color-gray-50);
    }

    .deadline-date {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: var(--space-2);
        background: var(--color-gray-100);
        border-radius: var(--radius-md);
    }

    .deadline-date.urgent {
        background: var(--color-error-100);
    }

    .deadline-date.warning {
        background: var(--color-warning-100);
    }

    .date-day {
        font-size: var(--text-xl);
        font-weight: var(--font-bold);
        color: var(--color-gray-900);
    }

    .date-month {
        font-size: var(--text-xs);
        color: var(--color-gray-600);
        text-transform: uppercase;
    }

    .deadline-info {
        display: flex;
        flex-direction: column;
        gap: var(--space-1);
    }

    .deadline-title {
        font-size: var(--text-sm);
        font-weight: var(--font-medium);
        color: var(--color-gray-900);
    }

    .deadline-description {
        font-size: var(--text-xs);
        color: var(--color-gray-500);
    }

    .deadline-type {
        display: flex;
        flex-direction: column;
        gap: var(--space-1);
    }

    .type-badge {
        display: inline-flex;
        align-items: center;
        gap: var(--space-1);
        padding: var(--space-1) var(--space-2);
        border-radius: var(--radius-sm);
        font-size: var(--text-xs);
        font-weight: var(--font-medium);
        width: fit-content;
    }

    .type-badge.federal {
        background: var(--color-primary-100);
        color: var(--color-primary-700);
    }

    .type-badge.state {
        background: var(--color-accent-100);
        color: var(--color-accent-700);
    }

    .type-badge.quarterly {
        background: var(--color-purple-100);
        color: var(--color-purple-700);
    }

    .type-badge.payroll {
        background: var(--color-pink-100);
        color: var(--color-pink-700);
    }

    .applies-to {
        font-size: var(--text-xs);
        color: var(--color-gray-500);
    }

    .deadline-reminder {
        display: flex;
        flex-direction: column;
        gap: var(--space-1);
    }

    .reminder-status {
        display: flex;
        align-items: center;
        gap: var(--space-1);
        font-size: var(--text-xs);
        color: var(--color-gray-600);
    }

    .reminder-status.active {
        color: var(--color-success-600);
    }

    .reminder-time {
        font-size: var(--text-xs);
        color: var(--color-gray-500);
    }

    .deadline-actions {
        display: flex;
        gap: var(--space-2);
        justify-content: flex-end;
    }

    .action-btn {
        width: var(--space-8);

        height: var(--space-8);

        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-md);
        border: 1px solid var(--color-gray-200);
        background: white;
        cursor: pointer;
        color: var(--color-gray-500);
        transition: all 0.2s;
    }

    .action-btn:hover {
        background: var(--color-gray-50);
        color: var(--color-gray-700);
    }

    /* Empty State */
    .empty-state {
        text-align: center;
        padding: var(--space-12);
    }

    .empty-icon {
        width: 64px;
        height: 64px;
        margin: 0 auto var(--space-4);
        color: var(--color-gray-300);
    }

    .empty-title {
        font-size: var(--text-lg);
        font-weight: var(--font-semibold);
        color: var(--color-gray-900);
        margin-bottom: var(--space-2);
    }

    .empty-text {
        font-size: var(--text-sm);
        color: var(--color-gray-500);
        margin-bottom: var(--space-6);
    }

    /* Responsive */
    @media (max-width: 1024px) {
        .stats-row {
            grid-template-columns: repeat(2, 1fr);
        }

        .deadline-item {
            grid-template-columns: 70px 1fr 120px;
        }

        .deadline-type,
        .deadline-reminder {
            display: none;
        }
    }

    @media (max-width: 768px) {
        .deadlines-page {
            padding: var(--space-4);
        }

        .page-header {
            flex-direction: column;
            align-items: flex-start;
            gap: var(--space-4);
        }

        .filters-bar {
            flex-direction: column;
        }

        .deadline-item {
            grid-template-columns: 60px 1fr auto;
            gap: var(--space-3);
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="deadlines-page">
    <div class="page-header">
        <h1 class="page-title">Tax Deadlines</h1>
        <div class="header-actions">
            <a href="/deadlines/calendar" class="btn btn-secondary">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="18" rx="2"/>
                    <path d="M16 2v4M8 2v4M3 10h18"/>
                </svg>
                Calendar View
            </a>
            <button class="btn btn-primary" onclick="setReminder()">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                    <path d="M13.73 21a2 2 0 01-3.46 0"/>
                </svg>
                Set Reminder
            </button>
        </div>
    </div>

    <!-- Stats Row -->
    <div class="stats-row">
        <div class="stat-card urgent">
            <div class="stat-value">2</div>
            <div class="stat-label">Overdue</div>
        </div>
        <div class="stat-card warning">
            <div class="stat-value">5</div>
            <div class="stat-label">Due This Week</div>
        </div>
        <div class="stat-card upcoming">
            <div class="stat-value">12</div>
            <div class="stat-label">This Month</div>
        </div>
        <div class="stat-card completed">
            <div class="stat-value">48</div>
            <div class="stat-label">Reminders Set</div>
        </div>
    </div>

    <!-- Filters -->
    <div class="filters-bar">
        <input type="text" class="search-input" placeholder="Search deadlines...">
        <select class="filter-select">
            <option value="">All Types</option>
            <option value="federal">Federal</option>
            <option value="state">State</option>
            <option value="quarterly">Quarterly Estimates</option>
            <option value="payroll">Payroll</option>
        </select>
        <select class="filter-select">
            <option value="">All Categories</option>
            <option value="individual">Individual</option>
            <option value="business">Business</option>
            <option value="employer">Employer</option>
        </select>
        <select class="filter-select">
            <option value="">Time Period</option>
            <option value="week">This Week</option>
            <option value="month">This Month</option>
            <option value="quarter">This Quarter</option>
            <option value="year">This Year</option>
        </select>
    </div>

    <!-- Deadlines List -->
    <div class="deadlines-card">
        <!-- Overdue Section -->
        <div class="deadlines-section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span>Overdue</span>
                    <span class="section-badge urgent">2</span>
                </div>
                <svg class="section-toggle" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </div>
            <div class="deadline-list">
                <div class="deadline-item">
                    <div class="deadline-date urgent">
                        <span class="date-day">15</span>
                        <span class="date-month">Jan</span>
                    </div>
                    <div class="deadline-info">
                        <div class="deadline-title">Q4 2025 Estimated Tax Payment</div>
                        <div class="deadline-description">Fourth quarter estimated tax payment for individuals and self-employed</div>
                    </div>
                    <div class="deadline-type">
                        <span class="type-badge quarterly">Quarterly</span>
                        <span class="applies-to">Individual, Self-Employed</span>
                    </div>
                    <div class="deadline-reminder">
                        <div class="reminder-status active">
                            <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                            Reminder sent
                        </div>
                        <span class="reminder-time">Sent 3 days ago</span>
                    </div>
                    <div class="deadline-actions">
                        <button class="action-btn" title="Edit reminder">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            </svg>
                        </button>
                        <button class="action-btn" title="Mark as filed">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- This Week Section -->
        <div class="deadlines-section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span>Due This Week</span>
                    <span class="section-badge warning">5</span>
                </div>
                <svg class="section-toggle" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </div>
            <div class="deadline-list">
                <div class="deadline-item">
                    <div class="deadline-date warning">
                        <span class="date-day">31</span>
                        <span class="date-month">Jan</span>
                    </div>
                    <div class="deadline-info">
                        <div class="deadline-title">W-2 Forms Due to Employees</div>
                        <div class="deadline-description">Employers must provide W-2 forms to all employees</div>
                    </div>
                    <div class="deadline-type">
                        <span class="type-badge federal">Federal</span>
                        <span class="applies-to">Employers</span>
                    </div>
                    <div class="deadline-reminder">
                        <div class="reminder-status active">
                            <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            </svg>
                            Reminder set
                        </div>
                        <span class="reminder-time">2 days before</span>
                    </div>
                    <div class="deadline-actions">
                        <button class="action-btn" title="Edit reminder">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            </svg>
                        </button>
                        <button class="action-btn" title="Mark as filed">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="deadline-item">
                    <div class="deadline-date warning">
                        <span class="date-day">31</span>
                        <span class="date-month">Jan</span>
                    </div>
                    <div class="deadline-info">
                        <div class="deadline-title">1099 Forms Due to Recipients</div>
                        <div class="deadline-description">1099-NEC and 1099-MISC forms must be sent to recipients</div>
                    </div>
                    <div class="deadline-type">
                        <span class="type-badge federal">Federal</span>
                        <span class="applies-to">Businesses</span>
                    </div>
                    <div class="deadline-reminder">
                        <div class="reminder-status active">
                            <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            </svg>
                            Reminder set
                        </div>
                        <span class="reminder-time">2 days before</span>
                    </div>
                    <div class="deadline-actions">
                        <button class="action-btn" title="Edit reminder">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            </svg>
                        </button>
                        <button class="action-btn" title="Mark as filed">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upcoming Section -->
        <div class="deadlines-section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span>Upcoming This Month</span>
                    <span class="section-badge info">12</span>
                </div>
                <svg class="section-toggle" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </div>
            <div class="deadline-list">
                <div class="deadline-item">
                    <div class="deadline-date">
                        <span class="date-day">15</span>
                        <span class="date-month">Mar</span>
                    </div>
                    <div class="deadline-info">
                        <div class="deadline-title">S-Corp & Partnership Returns (Form 1120-S, 1065)</div>
                        <div class="deadline-description">Calendar year S-Corps and Partnerships must file returns</div>
                    </div>
                    <div class="deadline-type">
                        <span class="type-badge federal">Federal</span>
                        <span class="applies-to">Business - S-Corp, Partnership</span>
                    </div>
                    <div class="deadline-reminder">
                        <div class="reminder-status">
                            <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                            No reminder
                        </div>
                        <span class="reminder-time">Click to set</span>
                    </div>
                    <div class="deadline-actions">
                        <button class="action-btn" title="Set reminder">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                                <path d="M12 5v14M5 12h14"/>
                            </svg>
                        </button>
                        <button class="action-btn" title="Mark as filed">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="deadline-item">
                    <div class="deadline-date">
                        <span class="date-day">15</span>
                        <span class="date-month">Apr</span>
                    </div>
                    <div class="deadline-info">
                        <div class="deadline-title">Individual Tax Return (Form 1040)</div>
                        <div class="deadline-description">Federal individual income tax return and payment due</div>
                    </div>
                    <div class="deadline-type">
                        <span class="type-badge federal">Federal</span>
                        <span class="applies-to">Individual</span>
                    </div>
                    <div class="deadline-reminder">
                        <div class="reminder-status active">
                            <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            </svg>
                            Reminder set
                        </div>
                        <span class="reminder-time">7 days before</span>
                    </div>
                    <div class="deadline-actions">
                        <button class="action-btn" title="Edit reminder">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            </svg>
                        </button>
                        <button class="action-btn" title="Mark as filed">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="deadline-item">
                    <div class="deadline-date">
                        <span class="date-day">15</span>
                        <span class="date-month">Apr</span>
                    </div>
                    <div class="deadline-info">
                        <div class="deadline-title">Q1 2026 Estimated Tax Payment</div>
                        <div class="deadline-description">First quarter estimated tax payment for individuals and self-employed</div>
                    </div>
                    <div class="deadline-type">
                        <span class="type-badge quarterly">Quarterly</span>
                        <span class="applies-to">Individual, Self-Employed</span>
                    </div>
                    <div class="deadline-reminder">
                        <div class="reminder-status">
                            <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                            No reminder
                        </div>
                        <span class="reminder-time">Click to set</span>
                    </div>
                    <div class="deadline-actions">
                        <button class="action-btn" title="Set reminder">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                                <path d="M12 5v14M5 12h14"/>
                            </svg>
                        </button>
                        <button class="action-btn" title="Mark as filed">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    function toggleSection(header) {
        const toggle = header.querySelector('.section-toggle');
        const list = header.nextElementSibling;

        toggle.classList.toggle('collapsed');

        if (list.style.display === 'none') {
            list.style.display = 'flex';
        } else {
            list.style.display = 'none';
        }
    }

    function setReminder() {
        showToast('Set Reminder modal would open here', 'info');
    }
</script>
{% endblock %}
