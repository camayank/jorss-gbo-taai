{#
  Toast Component

  Floating notification that appears temporarily.
  Note: Requires JavaScript for proper functionality.

  Usage:
    {% from 'components/feedback/toast.html' import toast, toast_container %}

    {# Add container once per page #}
    {{ toast_container(position="bottom-right") }}

    {# Individual toast (typically rendered via JS) #}
    {{ toast(variant="success", title="Saved!", message="Your changes have been saved.") }}

  Parameters (toast):
    - variant: success|error|warning|info (required)
    - title: Toast title (optional)
    - message: Toast message (required)
    - action_text: Action button text (optional)
    - action_href: Action button URL (optional)
    - dismissible: boolean (default: true)
    - auto_dismiss: boolean - auto-hide after duration (default: true)
    - duration: Duration in ms (default: 5000)
    - class_name: Additional CSS classes (optional)

  Parameters (toast_container):
    - position: top-right|top-center|bottom-right|bottom-center (default: bottom-right)
#}

{% macro toast_container(position='bottom-right') %}
  {% set position_classes = {
    'top-right': 'top',
    'top-center': 'top center',
    'bottom-right': '',
    'bottom-center': 'center'
  } %}
  <div class="toast-container {{ position_classes.get(position, '') }}" id="toast-container"></div>
{% endmacro %}


{% macro toast(
  variant,
  message,
  title=none,
  action_text=none,
  action_href=none,
  dismissible=true,
  auto_dismiss=true,
  duration=5000,
  visible=true,
  class_name=''
) %}
  {% set icons = {
    'success': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>',
    'error': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6M9 9l6 6"/></svg>',
    'warning': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3M12 9v4M12 17h.01"/></svg>',
    'info': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>'
  } %}

  <div
    class="toast toast-{{ variant }} {% if visible %}visible{% endif %} {{ class_name }}"
    role="alert"
    {% if auto_dismiss %}data-auto-dismiss="{{ duration }}"{% endif %}
  >
    <span class="toast-icon">{{ icons.get(variant, icons.info) | safe }}</span>
    <div class="toast-content">
      {% if title %}
        <p class="toast-title">{{ title }}</p>
      {% endif %}
      <p class="toast-message">{{ message }}</p>
      {% if action_text %}
        <div class="toast-action">
          <a href="{{ action_href | default('#') }}" class="toast-action-btn">{{ action_text }}</a>
        </div>
      {% endif %}
    </div>
    {% if dismissible %}
      <button type="button" class="toast-close" onclick="this.parentElement.remove()" aria-label="Close">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6 6 18M6 6l12 12"/>
        </svg>
      </button>
    {% endif %}
    {% if auto_dismiss %}
      <div class="toast-progress" style="animation-duration: {{ duration }}ms;"></div>
    {% endif %}
  </div>
{% endmacro %}
