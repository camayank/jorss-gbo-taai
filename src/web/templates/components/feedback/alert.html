{#
  Alert Component

  Inline alert/notification for contextual feedback.

  Usage:
    {% from 'components/feedback/alert.html' import alert %}
    {{ alert(variant="success", title="Success!", message="Your changes have been saved.") }}
    {{ alert(variant="error", message="Something went wrong.", dismissible=true) }}

  Parameters:
    - variant: success|error|warning|info (required)
    - title: Alert title (optional)
    - message: Alert message (required)
    - dismissible: boolean - show close button (default: false)
    - icon: Custom icon HTML (optional, uses default icons if not provided)
    - class_name: Additional CSS classes (optional)
#}

{% macro alert(
  variant,
  message,
  title=none,
  dismissible=false,
  icon=none,
  class_name=''
) %}
  {% set icons = {
    'success': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>',
    'error': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6M9 9l6 6"/></svg>',
    'warning': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3M12 9v4M12 17h.01"/></svg>',
    'info': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>'
  } %}

  <div class="alert alert-{{ variant }} {{ class_name }}" role="alert">
    <span class="alert-icon">{{ icon | default(icons.get(variant, icons.info)) | safe }}</span>
    <div class="alert-content">
      {% if title %}
        <p class="alert-title">{{ title }}</p>
      {% endif %}
      <p class="alert-message">{{ message }}</p>
    </div>
    {% if dismissible %}
      <button type="button" class="alert-close" onclick="this.parentElement.remove()" aria-label="Close">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6 6 18M6 6l12 12"/>
        </svg>
      </button>
    {% endif %}
  </div>
{% endmacro %}


{# Banner Component - Full-width alert typically at top of page #}
{% macro banner(
  variant,
  message,
  link_text=none,
  link_href=none,
  dismissible=false,
  class_name=''
) %}
  <div class="banner banner-{{ variant }} {{ class_name }}" role="alert">
    <div class="banner-content">
      <span>{{ message }}</span>
      {% if link_text and link_href %}
        <a href="{{ link_href }}" style="font-weight: 500; text-decoration: underline;">{{ link_text }}</a>
      {% endif %}
    </div>
    {% if dismissible %}
      <button type="button" class="banner-close" onclick="this.parentElement.remove()" aria-label="Close">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6 6 18M6 6l12 12"/>
        </svg>
      </button>
    {% endif %}
  </div>
{% endmacro %}
